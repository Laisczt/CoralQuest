<p>Uma das ferramentas mais importantes da Unity são as Corotinas, elas permitem dividir o fluxo de execução do script e fazer com que uma função seja executada ao longo de vários frames.</p>

<p>Corotinas são declaradas como funçãos com tipo IEnumerator e devem ser chamadas com a função StartCoroutine().</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="n">Input</span><span class="p">.</span><span class="nf">GetKeyDown</span><span class="p">(</span><span class="n">KeyCode</span><span class="p">.</span><span class="n">Space</span><span class="p">))</span>
	<span class="p">{</span>
		<span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">DashForward</span><span class="p">(</span><span class="m">10</span><span class="p">));</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="n">IEnumerator</span> <span class="nf">DashForward</span><span class="p">(</span><span class="kt">int</span> <span class="n">duracao</span><span class="p">)</span>
<span class="p">{</span>
<span class="cm">/*
	Força o jogador a se mover rapidamente para a direita por alguns frames
*/</span>
	<span class="n">mRigidBody</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">RigidBody2D</span><span class="p">&gt;();</span>
	
	<span class="k">while</span><span class="p">(</span><span class="n">duracao</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
	<span class="p">{</span>	
		<span class="n">mRigidBody</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">right</span> <span class="p">*</span> <span class="m">5</span><span class="p">;</span>
		<span class="n">duracao</span><span class="p">--;</span>
		<span class="k">yield</span> <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Dentro de uma corotina, devemos usar a palavra ´yield´ para indicar onde a execução será pausada até o próximo frame. Podemos também utilizar outros valores no lugar de null, entre eles: ´yield return new WaitForFixedUpdate()´ retomará a execução no proximo frame de fixed update, ‘yield return new WaitForSeconds(3)’ retomará após 3 segundos.</p>

