<p>A UI é uma parte muito importante de qualquer jogo, mais importante ainda é que ela seja consistente entre fases diferentes. A forma que vimos para criar UIs até agora não é ideal, pois ao fazer alterações, precisamos replicá-las em todas as cenas que a usam.</p>

<p>Uma forma mais versátil de fazer nossa UI é colocá-la numa cena própria, e então carregar tal cena de forma aditiva(ou, por cima) da cena da fase.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
<span class="p">{</span>
	<span class="nf">StartCoroutine</span><span class="p">(</span><span class="nf">LoadUI</span><span class="p">());</span>
<span class="p">}</span>
<span class="n">IEnumerator</span> <span class="nf">LoadUI</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">var</span> <span class="n">_UIScene</span> <span class="p">=</span> <span class="n">SceneManager</span><span class="p">.</span><span class="nf">LoadScene</span><span class="p">(</span><span class="s">"UI"</span><span class="p">,</span> <span class="k">new</span> <span class="nf">LoadSceneParameters</span><span class="p">(</span><span class="n">LoadSceneMode</span><span class="p">.</span><span class="n">Additive</span><span class="p">));</span>   <span class="c1">// Carrega a UI por cima da cena inicial</span>

        <span class="k">while</span><span class="p">(!</span><span class="n">_UIScene</span><span class="p">.</span><span class="n">isLoaded</span><span class="p">)</span>   <span class="c1">// Espera até a UI estar carregada</span>
        <span class="p">{</span>
            <span class="k">yield</span> <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Note que carregar cenas aditivamente pode demorar um pouco, por isso é recomendado usar uma <a href="../../../2024/09/05/Corotinas.html">Corotina</a></p>

<p>A desvantagem desse método é que referências entre objetos da UI e da fase devem ser tratadas com mais atenção. Utilizar o <a href="../../../2024/09/03/Singleton.html">Padrão Singleton</a>, e tags pode ajudar bastante. Outra forma é utilizar a referência a cena retornada pela função LoadScene().</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="n">_UIScene</span><span class="p">.</span><span class="nf">GetRootGameObjects</span><span class="p">()[</span><span class="m">0</span><span class="p">].</span><span class="n">transform</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">"Health Bar"</span><span class="p">).</span><span class="nf">SetFullHP</span><span class="p">();</span></code></pre></figure>

